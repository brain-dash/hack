<!doctype html>
<html lang="ru">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

    <script defer src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script defer src="{% static 'js/add-bpla.js' %}"></script>
    <script defer src="{% static 'js/account.js' %}"></script>
    <script defer src="{% static 'js/main.js' %}"></script>
    <script defer src="{% static 'js/table-el-bpla.js' %}"></script>
    <script defer src="{% static 'js/prev.js' %}"></script>

    <title>Управление БПЛА</title>
</head>

<body>
    <header class="header-secondary">
        <bpla-prev></bpla-prev>
        <bpla-account>
            <p>{{user}}</p>
        </bpla-account>
    </header>
    <h1> Используемые БПЛА </h1>
    <div class="bpla-list-container">
    </div>
    <a  class="button-add" 
              id="newbpla"
              data-bs-toggle="modal" 
              href="#addBPLA" 
              role="button"
              >
              <div class="svg-container" > 
              <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M26.76 10.096V2.704H28.824V10.096H26.76ZM23.992 7.376V5.424H31.608V7.376H23.992Z" fill="white"/>
                <path d="M31 17.9228C31 18.3003 30.925 18.674 30.7796 19.0217C30.6341 19.3694 30.4211 19.6841 30.1532 19.947C29.8852 20.21 29.5678 20.4159 29.2198 20.5526C28.8717 20.6893 28.5001 20.7539 28.1268 20.7428L21.4863 20.5458L16.6453 30.668C16.2571 31.4814 15.44 32 14.5458 32C14.3621 32.0001 14.1805 31.9609 14.013 31.8848C13.8455 31.8087 13.6959 31.6975 13.574 31.5586C13.4521 31.4197 13.3608 31.2563 13.306 31.079C13.2513 30.9018 13.2343 30.7148 13.2563 30.5305L14.4659 20.3375L9.18903 20.1816L8.50227 22.0819C8.37506 22.4337 8.14404 22.7374 7.84047 22.9521C7.5369 23.1668 7.17544 23.282 6.80499 23.2822C6.63904 23.2822 6.47472 23.2491 6.32142 23.1848C6.16812 23.1206 6.02884 23.0264 5.91156 22.9077C5.79428 22.789 5.7013 22.6481 5.63792 22.493C5.57454 22.3379 5.54201 22.1717 5.54219 22.0039V19.9123L4.40694 19.6729C4.00932 19.5891 3.65237 19.3695 3.39613 19.0509C3.13989 18.7322 3 18.3341 3 17.9235C3 17.5128 3.13989 17.1147 3.39613 16.7961C3.65237 16.4775 4.00932 16.2578 4.40694 16.1741L5.54219 15.936V13.8416C5.54185 13.5306 5.65392 13.2302 5.85732 12.9969C6.06071 12.7636 6.34141 12.6134 6.64662 12.5747L6.80499 12.5648C7.17504 12.5651 7.53607 12.6803 7.83934 12.8947C8.1426 13.1091 8.37351 13.4124 8.50087 13.7637L9.19044 15.6625L14.4477 15.5067L13.2563 5.46809C13.2537 5.44217 13.2518 5.41618 13.2507 5.39015L13.2479 5.31221C13.2479 4.58809 13.8296 4 14.5458 4C15.3657 4 16.1197 4.43504 16.5402 5.13366L16.6453 5.33205L21.4148 15.3012L28.1282 15.1028C28.8679 15.081 29.5859 15.3573 30.1242 15.8707C30.6624 16.3841 30.977 17.0927 30.9986 17.8406V17.9228H31Z" fill="white"/>
              </svg>
            </div>
            <p class="text">Добавить новый БПЛА</p>
          </a>

          <div class="modal fade " id="addBPLA" aria-hidden="true" aria-labelledby="addBPLALabel" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <form  action="/api/CreateUav" method="post">
                  <div class="modal-header">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M29.2933 7.53595L22.4735 0.718956C22.2479 0.491173 21.9794 0.310351 21.6835 0.186945C21.3875 0.0635398 21.0701 0 20.7494 0C20.4288 0 20.1113 0.0635398 19.8154 0.186945C19.5195 0.310351 19.251 0.491173 19.0254 0.718956L0.717077 19.0196C0.489593 19.2453 0.309098 19.5137 0.186018 19.8095C0.0629389 20.1053 -0.000284494 20.4226 9.6233e-07 20.7429V27.5599C9.6233e-07 28.2071 0.257189 28.8277 0.714986 29.2853C1.17278 29.7429 1.79369 30 2.44111 30H9.26096C9.58145 30.0003 9.89882 29.9371 10.1947 29.8141C10.4907 29.691 10.7592 29.5106 10.985 29.2832L29.2933 10.9826C29.7462 10.5232 30 9.90417 30 9.25926C30 8.61435 29.7462 7.99533 29.2933 7.53595V7.53595ZM2.94459 20.2397L15.8672 7.32244L18.4151 9.86928L5.4925 22.7865L2.94459 20.2397ZM2.44111 23.183L6.81985 27.5599H2.44111V23.183ZM9.76444 27.0566L7.21654 24.5098L20.1392 11.5926L22.6871 14.1394L9.76444 27.0566ZM24.4111 12.4161L17.5913 5.59913L20.7494 2.44227L27.5693 9.25926L24.4111 12.4161Z" fill="white"/>
                    </svg>
                    <input required type="text" class="modal-title form-control header-editable"  name="bpla-name" id="bpla-name" placeholder="Название БПЛА" id="addBPLALabel">
                    <button type="button" data-bs-dismiss="modal" aria-label="Close">
                        <svg width="32" height="31" viewBox="0 0 32 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <line x1="1" y1="29.5858" x2="29.5858" y2="1" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            <line x1="1" y1="-1" x2="41.4264" y2="-1" transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 31 31)" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                            
                    </button>
                  </div>  
                  <div class="modal-body">
                    <div class="mb-3">
                      <label for="bpla-mass" class="col-form-label">Скорость:</label>
                      <input required type="text" class="form-control" id="bpla-velocity" name="bpla-velocity">
                    </div>
                  <div class="mb-3">
                    <label for="bpla-angle" class="col-form-label">Максимальная перегрузка</label>
                    <input required type="text" class="form-control" id="bpla-gforce" name="bpla-gforce">
                  </div>
                  <div class="mb-3">
                    <label for="bpla-angle" class="col-form-label">Масса</label>
                    <input required type="text" class="form-control" id="bpla-volume"  name="bpla-volume">
                  </div>
                  <div class="modal-footer">
                    <button class="btn btn-primary button-like" data-bs-dismiss="modal">Добавить БПЛА</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          





    <script>
        //console.log("/api/")
        (async() => {
            let response = await fetch('/api/getUav');
            let json = await response.json(); // прочитать тело ответа как текст
            const container = document.querySelector(".bpla-list-container");
            json.forEach(element => {
                // let bpla = document.createElement('bpla-table-bpla');
                const bpla = document.createElement("bpla-table-bpla");
                bpla.setAttribute("status", element.status);
                bpla.setAttribute("name", element.name);
                container.appendChild(bpla)

            });
        })()

      
    </script>
</body>

</html>